{% extends 'base.html.twig' %}

{% block title %}{{ activity.name }}
{% endblock %}

{% block body %}

  <div class="container-product my-4">
    {% if activity.activityImages %}
      {% for activityImage in activity.activityImages %}
        {% if activityImage %}
          <img src="{{ vich_uploader_asset(activityImage) }}" alt="{{ activityImage.name }}">
        {% endif %}
      {% else %}
        <img src="{{ asset('build/images/notfound.png') }}" class="img-fluid"/>
      {% endfor %}
    {% endif %}
    <div class="row">
      <div class="col-md-8 mt-5 ckeditor">
        {{ activity.description|raw }}
      </div>
      <div class="col-md-4 mt-5 formCalandar">
        <h1 class="mb-3">{{ activity.name }}</h1>
        <form class="mt-5" method="POST" action="{{ path('app_activity_show', {'id': activity.id}) }}">
          <select class="select" name="service" onchange="updateTotal()">
            <option value="" disabled="disabled" selected="selected" hidden="hidden">Découvrez les prestations</option>
            {% for service in activity.services %}
              <option value="{{ service.id }}" data-price="{{ service.price }}">
                {{ service.name }}
                {{ service.price }}€
              </option>

            {% endfor %}
          </select>
          <h3 class="mt-4 mb-3">Disponibilités <img src="{{ asset('build/images/symbols_calendar.svg') }}"/></h3>
          {% include 'activity/_calendar.html.twig' %}
          <div class="d-flex justify-content-between">
            <p>Total</p>
            <div id="total">0€</div>
          </div>
          <button type="submit">Reservez</button>
        </form>

      </div>
    </div>
  </div>
  {% block javascriptsTotal %}
    <script>
      function updateTotal() {
        var selectElement = document.querySelector('.select');
        var selectedOption = selectElement.options[selectElement.selectedIndex];
        var price = selectedOption.dataset.price;
        document.getElementById('total').innerText = price + '€';
      }
    </script>

  {% endblock %}

{% endblock %}
